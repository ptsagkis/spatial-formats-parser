<html>
  <head>
    <title>Test GeoJSON</title>
  
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"></link>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.16.0/ol.css" rel="stylesheet" type="text/css"></link>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.16.0/ol-debug.js"></script>
</head>

  <body>    


<div class="container" style="width: 100%;">
<<<<<<< HEAD
 <label >Select the data format you want to parse! </label>
=======
 <label>Select the data format you want to parse! </label>
>>>>>>> refs/remotes/origin/master
  <select class="form-control" id="formatSelector" onchange="setFormat(this);">
    <option value="GeoJson">GeoJson</option>
    <option value="WKT">WKT</option>
    <option value="KML">KML</option>
    <option value="GPX">GPX</option>
</select>
    <div class="row">
        <div class="col-xs-6 center-block">
          <div style="position:absolute;bottom: 0;padding-bottom:50px" id="message"></div>
          <textarea class="form-control" id="format-input" placeholder="Paste GeoJSON here" style="height: 500px;"></textarea>
          <div style="text-align:center;">
                     <a id="submit" class="btn btn-primary btn-large btn-action" onclick="parseIt()" >Parse It!!!</a>
                    <a id="clear" class="btn btn-large btn-action btn-default" onclick="clearAll()" >Clear</a>
          </div>

        </div>
<div class="col-xs-6 center-block">
         <div class="map" id="map" style="height: 500px;">
</div>
</div>
</div>
</div>
<script>    
var image = new ol.style.Circle({
  radius: 5,
  fill: null,
  stroke: new ol.style.Stroke({color: 'red', width: 1})
});

var styles = {
  'Point': new ol.style.Style({
    image: image
  }),
  'LineString': new ol.style.Style({
    stroke: new ol.style.Stroke({
      color: 'green',
      width: 1
    })
  }),
  'MultiLineString': new ol.style.Style({
    stroke: new ol.style.Stroke({
      color: 'green',
      width: 1
    })
  }),
  'MultiPoint': new ol.style.Style({
    image: image
  }),
  'MultiPolygon': new ol.style.Style({
    stroke: new ol.style.Stroke({
      color: 'yellow',
      width: 1
    }),
    fill: new ol.style.Fill({
      color: 'rgba(255, 255, 0, 0.1)'
    })
  }),
  'Polygon': new ol.style.Style({
    stroke: new ol.style.Stroke({
      color: 'blue',
      lineDash: [4],
      width: 3
    }),
    fill: new ol.style.Fill({
      color: 'rgba(0, 0, 255, 0.1)'
    })
  }),
  'GeometryCollection': new ol.style.Style({
    stroke: new ol.style.Stroke({
      color: 'magenta',
      width: 2
    }),
    fill: new ol.style.Fill({
      color: 'magenta'
    }),
    image: new ol.style.Circle({
      radius: 10,
      fill: null,
      stroke: new ol.style.Stroke({
        color: 'magenta'
      })
    })
  }),
  'Circle': new ol.style.Style({
    stroke: new ol.style.Stroke({
      color: 'red',
      width: 2
    }),
    fill: new ol.style.Fill({
      color: 'rgba(255,0,0,0.2)'
    })
  })
};

var styleFunction = function(feature) {
  return styles[feature.getGeometry().getType()];
};

var vectorSource = new ol.source.Vector({});
var vectorLayer = new ol.layer.Vector({
  source: vectorSource,
  style: styleFunction
});

var map = new ol.Map({
  layers: [
    new ol.layer.Tile({
      source: new ol.source.OSM()
    }),
    vectorLayer
  ],
  target: 'map',
  controls: ol.control.defaults({
    attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
      collapsible: false
    })
  }),
  view: new ol.View({
    center: [0, 0],
    zoom: 2
  })
});

function parseIt(){ 
var usrFormat =   document.getElementById('formatSelector').value;
var features;
vectorSource.clear();
switch (usrFormat) {
 case 'GeoJson':
    try {
      features = new ol.format.GeoJSON().readFeatures(document.getElementById('format-input').value);
      vectorSource.addFeatures(features); 
      map.getView().fit(vectorSource.getExtent(), map.getSize());         
    }
    catch(err) {  
      $('#message').html(
           '<div style="margin: 20px;"  class="alert alert-danger fade in">'+
           '<a href="#" class="close" data-dismiss="alert">&times;</a>Error Parsing GeoJson:'+err.message+'</div>');  
            $("#message").fadeTo(4000, 500).slideUp(500, function(){
            $("#message").alert('close');
        });
     }
     break;
case 'KML':   
    try {
      features = new ol.format.KML().readFeatures(document.getElementById('format-input').value,{
                 dataProjection:'EPSG:4326',
                 featureProjection:'EPSG:3857'
              });
      vectorSource.addFeatures(features); 
      map.getView().fit(vectorSource.getExtent(), map.getSize());         
    }
    catch(err) {  
      $('#message').html(
           '<div style="margin: 20px;"  class="alert alert-danger fade in">'+
           '<a href="#" class="close" data-dismiss="alert">&times;</a>Error Parsing KML:'+err.message+'</div>');  
            $("#message").fadeTo(4000, 500).slideUp(500, function(){
            $("#message").alert('close');
        });
     }
     break;    
 case 'GPX':   
    try {
      features = new ol.format.GPX().readFeatures(document.getElementById('format-input').value,{
                 dataProjection:'EPSG:4326',
                 featureProjection:'EPSG:3857'
              });
      vectorSource.addFeatures(features); 
      map.getView().fit(vectorSource.getExtent(), map.getSize());         
    }
    catch(err) {  
      $('#message').html(
           '<div style="margin: 20px;"  class="alert alert-danger fade in">'+
           '<a href="#" class="close" data-dismiss="alert">&times;</a>Error Parsing GPX:'+err.message+'</div>');  
            $("#message").fadeTo(4000, 500).slideUp(500, function(){
            $("#message").alert('close');
        });
     }
     break;
     //wkt sample "POLYGON((-15.8203125 2.4609375, -15.8203125 -10.546875, 6.85546875 -11.25, 8.26171875 -3.33984375, -15.8203125 2.4609375))"
  case 'WKT':   
    try {
      features = new ol.format.WKT().readFeatures(document.getElementById('format-input').value,{
                 dataProjection:'EPSG:4326',
                 featureProjection:'EPSG:3857'
              });
      vectorSource.addFeatures(features); 
      map.getView().fit(vectorSource.getExtent(), map.getSize());         
    }
    catch(err) {  
      $('#message').html(
           '<div style="margin: 20px;"  class="alert alert-danger fade in">'+
           '<a href="#" class="close" data-dismiss="alert">&times;</a>Error Parsing WKT:'+err.message+'</div>');  
            $("#message").fadeTo(4000, 500).slideUp(500, function(){
            $("#message").alert('close');
        });
     }
     break;
  }

}


function setFormat(elm){
document.getElementById('format-input').placeholder='Paste '+elm.value+' here ';
}

function clearAll(){
document.getElementById('format-input').value='';
vectorSource.clear();
}
    </script>
  </body>
</html>